{
  "hash": "f58fd441f10d8af0950c46f6a22447ae",
  "result": {
    "engine": "knitr",
    "markdown": "### Transformación de Variable Tipo Box-Cox en R Quarto\n\nLa transformación de variable tipo Box-Cox es una técnica utilizada en análisis estadístico para mejorar la adecuación de los datos a los supuestos de normalidad y homogeneidad de varianza. Esta transformación es especialmente útil para variables continuas positivas que presentan asimetría o heterogeneidad de varianza. La transformación de Box-Cox se define mediante la siguiente ecuación:\n\n```         \n                    y ( λ ) = (x^(λ) - 1) / λ \n```\n\nDonde:\n\n-   **`λ`** es lambda.\n-   **`x`** es la variable original.\n-   **`y(λ)`** es la variable transformada para un valor determinado de λ.\n-   **`λ`** es el parámetro de transformación que puede variar desde -∞ hasta +∞.\n\nEl valor de `λ` determina el tipo de transformación aplicada:\n\n-   Si **`λ = 0`** , la transformación de Box-Cox es equivalente al logaritmo natural (ln).\n-   Si **`λ = 1`** , la transformación de Box-Cox es equivalente a una transformación lineal (sin transformación).\n-   Si **`λ < 0`** , se aplica una transformación inversa.\n\n### Preparo Pre-análisis\n\nPara realizar este tipo de transformación, se utiliza el paquete `MASS` en R.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(MASS)\nlibrary(ggthemes)\nlibrary(ggplot2)\n```\n:::\n\n\n### Ejemplo con Datos: InsectSprays\n\nUtilizaremos el conjunto de datos `InsectSprays` disponible en R para ilustrar la transformación de Box-Cox. La función `boxcox()` se utiliza para calcular la transformación de Box-Cox y encontrar el valor óptimo de `λ` para una variable específica. Esta función devuelve una lista de resultados, incluyendo el valor óptimo de `λ` y gráficos de diagnóstico.\n\n### 1. **Cargar los datos de InsectSprays**:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninsects <- InsectSprays\n```\n:::\n\n\n### 2. **Aplicar la transformación de Box-Cox**:\n\nPrimero, se ajusta un modelo lineal simple para la variable `count` con un ajuste adicional de 0.1 para evitar valores cero.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nb <- boxcox(lm(insects$count + 0.1 ~ 1))\n```\n\n::: {.cell-output-display}\n![](Aula18_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n### 3. **Encontrar el valor óptimo de λ**:\n\nEl valor óptimo de `λ` se encuentra seleccionando el valor de `λ` que maximiza la log-verosimilitud devuelta por `boxcox()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlambda <- b$x[which.max(b$y)]\nlambda\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.4242424\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Crear DataFrame a partir de los resultados de boxcox\nboxcox_df <- data.frame(\n  lambda = b$x,\n  log_likelihood = b$y\n)\n\n# Graficar con ggplot2\nggplot(boxcox_df, aes(x = lambda, y = log_likelihood)) +\n  geom_line(color = \"blue\", size = 1) +\n  geom_vline(xintercept = lambda, linetype = \"dashed\", color = \"red\") +\n  geom_point(aes(x = lambda, y = max(log_likelihood)), color = \"red\", size = 1) +\n  annotate(\"text\", x = lambda + 0.2, y = -130,\n           label = paste(\"Lambda =\", round(lambda, 3)),color = \"black\") +\n  labs(title = \"Transformación de Box-Cox\",\n       x = \"λ Lambda\",\n       y = \"Log-Verosimilitud\") +\n  theme_few()+\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\", size = 14),\n    axis.title = element_text(face = \"bold\", size = 12),\n    axis.text = element_text(size = 10)\n  )\n```\n\n::: {.cell-output-display}\n![](Aula18_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n### 4. **Transformar la variable `count`**:\n\nUtilizando el valor óptimo de `λ`, se transforma la variable `count` y se almacena en una nueva variable `count2`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninsects$count2 <- (insects$count ^ lambda - 1) / lambda\n```\n:::\n\n\n### 5. **Visualizar la distribución antes y después de la transformación**:\n\nSe crean histogramas para comparar la distribución de la variable original y la transformada.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(1, 2))  # Dividir la ventana gráfica en 2 columnas\nhist(insects$count, main = \"'Count' Original\", xlab = \"count\")\nhist(insects$count2, main = \" 'Count' Transformado\", xlab = \"count2\")\n```\n\n::: {.cell-output-display}\n![](Aula18_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n### Aprendizaje del día\n\nLa transformación de Box-Cox es una herramienta útil para transformar datos y cumplir con los supuestos de normalidad y homogeneidad de varianza necesarios en muchos métodos estadísticos. Mediante el ajuste del parámetro `λ`, se pueden lograr distribuciones de datos más simétricas y con varianza constante, facilitando análisis más precisos y válidos.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}